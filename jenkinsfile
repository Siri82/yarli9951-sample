pipeline
{
  agent any

parameters {

booleanParam(name: 'checkout', defaultValue: true, description: '')
booleanParam(name: 'build', defaultValue: true, description: '')
choice(name: 'VERSION', choices: ['1.1', '1.2', '2.0'], description: '')
string(name: 'Ticket_no', defaultValue: 'staging', description: '')
booleanParam(name: 'non-regression', defaultValue: true, description: '')

}
  stages {


     stage ('checkout')
     {
       when {
            expression { checkout ==~ true }

            }

       steps {
         checkout([$class: 'GitSCM', branches: [[name: '*/master']], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[url: 'https://github.com/yarli9951/sample']]])
     }
     }

     stage ('build')
     {
          when {
              expression { build ==~ true }

              }

     steps {
        script {
          sh 'cd /opt/jenkins/workspace/session815-pipeline/my-app ; mvn clean'
              }
           }

        }

        stage ('Non-regression')
        {
             when {
                 expression {  non-regression ==~ true }

                 }

        steps {
           script {
             sh 'This is no-regression stage'
                 }
              }

           }

  }


}
